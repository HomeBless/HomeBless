{% extends 'base.html' %}
{% load static %}
{% load humanize %}

{% block content %}

<form id="add-property-form" action="{% url 'HomeBless:sell' %}" method="POST">
    {% csrf_token %}

<div class="pt-[178px] pb-[60px]">

<div class="w-full max-w-3xl mx-auto flex flex-col space-y-6 mb-10">
    <div class="flex items-start space-x-4 relative">
        <div class="flex flex-col items-center">
            <div class="w-5 h-5 bg-blue-700 rounded-full"></div>
            <div class="w-[2px] absolute top-5 bottom-0 left-[9px] bg-slate-300"></div>
        </div>
        <div class="flex-1 space-y-4 h-auto">
            <div>
                <p class="text-gray-600 text-base">ขั้นตอนที่ 1</p>
                <p class="text-blue-700 text-xl font-bold">ข้อมูลเบื้องต้น</p>
            </div>

            <div id="section-1" class="flex-1 space-y-4 h-auto">
                <!-- สถานะ -->
                <div>
                    <p class="text-gray-600 text-xl font-medium">สถานะ</p>
                    <div class="flex flex-wrap gap-4">
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="radio" name="seller_status" value="owner" class="form-radio text-blue-700" />
                            เจ้าของบ้าน
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="radio" name="seller_status" value="agent" class="form-radio text-blue-700" />
                            นายหน้า
                        </label>
                    </div>
                </div>

                <!-- ประกาศ -->
                <div>
                    <p class="text-gray-600 text-xl font-medium">ประกาศ</p>
                    <div class="flex flex-wrap gap-4">
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="radio" name="selling_type" value="buy" class="form-radio text-blue-700" />
                            ขาย
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="radio" name="selling_type" value="rent" class="form-radio text-blue-700" />
                            เช่า
                        </label>
                    </div>
                </div>

                <!-- ประเภท -->
                <div>
                    <p class="text-gray-600 text-xl font-medium">ประเภท</p>
                    <div class="flex flex-wrap gap-4">
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="radio" name="property_type" value="1" class="form-radio text-blue-700" />
                            คอนโด
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="radio" name="property_type" value="2" class="form-radio text-blue-700" />
                            อพาร์ตเมนต์
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="radio" name="property_type" value="3" class="form-radio text-blue-700" />
                            บ้านเดี่ยว
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="radio" name="property_type" value="4" class="form-radio text-blue-700" />
                            ทาวน์โฮม
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="radio" name="property_type" value="5" class="form-radio text-blue-700" />
                            โฮมออฟฟิศ
                        </label>
                    </div>
                </div>

                <!-- ทำเล -->
                <div>
                    <p class="text-gray-600 text-xl font-medium">ทำเล</p>
                    <input type="text" name="location" placeholder="ทำเล เช่น ลาดพร้าว 71"
                        class="w-full p-2.5 bg-stone-50 rounded-lg border border-slate-400 text-gray-600" />
                </div>
                 <!-- ห้องนอน -->
                <div>
                    <p class="text-gray-600 text-xl font-medium">จำนวนห้องนอน</p>
                    <input type="number" name="bedrooms" placeholder="จำนวนห้องนอน"
                        class="w-full p-2.5 bg-stone-50 rounded-lg border border-slate-400 text-gray-600" />
                </div>
                <!-- ห้องน้ำ -->
                <div>
                    <p class="text-gray-600 text-xl font-medium">จำนวนห้องน้ำ</p>
                    <input type="number" name="bathrooms" placeholder="จำนวนห้องน้ำ"
                        class="w-full p-2.5 bg-stone-50 rounded-lg border border-slate-400 text-gray-600" />
                </div>

                <!-- ชั้น -->
                <div>
                    <p class="text-gray-600 text-xl font-medium">จำนวนชั้น</p>
                    <input type="number" name="floors" placeholder="จำนวนชั้น"
                        class="w-full p-2.5 bg-stone-50 rounded-lg border border-slate-400 text-gray-600" />
                </div>

                <!-- ที่จอดรถ -->
                <div>
                    <p class="text-gray-600 text-xl font-medium">จำนวนรถยนต์ที่จอดได้</p>
                    <input type="number" name="garages" placeholder="จำนวนรถยนต์ที่จอดได้"
                        class="w-full p-2.5 bg-stone-50 rounded-lg border border-slate-400 text-gray-600" />
                </div>

                <!-- พื้นที่ -->
                <div>
                    <p class="text-gray-600 text-xl font-medium">พื้นที่ใช้สอย</p>
                    <input type="number" name="area" placeholder="พื้นที่ในหน่วย ตารางวา"
                        class="w-full p-2.5 bg-stone-50 rounded-lg border border-slate-400 text-gray-600" />
                </div>

                <!-- ปีที่สร้าง -->
                <div>
                    <p class="text-gray-600 text-xl font-medium">ปีที่สร้าง</p>
                    <input type="number" name="construct_year" placeholder="โปรดใส่ปี พ.ศ."
                        class="w-full p-2.5 bg-stone-50 rounded-lg border border-slate-400 text-gray-600" />
                </div>
                <button type="button" id="section-1-next-btn" class="p-2.5 bg-blue-700 text-white rounded-md w-[100px] text-center hover:bg-blue-800">ต่อไป</button>
            </div>
        </div>


    </div>

    <!-- ขั้นตอนที่ 2 -->
    <div class="flex items-start space-x-4 relative">
        <div class="flex flex-col items-center">
            <div class="w-5 h-5 bg-blue-700 rounded-full"></div>
            <div class="w-[2px] absolute top-5 bottom-0 left-[9px] bg-slate-300"></div>
        </div>
        <div class="flex-1 space-y-4">
            <div>
                <p class="text-gray-600 text-base">ขั้นตอนที่ 2</p>
                <p class="text-blue-700 text-xl font-bold">ข้อมูลประกาศ</p>
            </div>
            <div id="section-2" class="flex-1 space-y-4 h-auto">
                <!-- หัวข้อประกาศ -->
                <div>
                    <p class="text-gray-600 text-xl font-medium">หัวข้อประกาศ</p>
                    <input type="text" name="title" placeholder="หัวข้อประกาศ เช่น ขายบ้านโครงการ..."
                        class="w-full p-2.5 bg-stone-50 rounded-lg border border-slate-400 text-gray-600" />
                </div>

                <!-- รายละเอียด -->
                <div>
                    <p class="text-gray-600 text-xl font-medium">รายละเอียด</p>
                    <textarea name="description" placeholder="เช่น บ้านเดี่ยว ปลูกเอง ทำเลดี สวยมาก พร้อมตกแต่ง..."
                        class="w-full h-24 p-2.5 bg-stone-50 rounded-lg border border-slate-400 text-gray-600"></textarea>
                </div>

                <div>
                    <p class="text-gray-600 text-xl font-medium">รูปภาพ</p>
                    <input type="file" multiple accept="image/*" id="imageUpload" class="hidden" onchange="previewImages()" />
                    <label for="imageUpload" class="w-full h-52 rounded-lg border-2 border-dashed border-slate-300 flex justify-center items-center cursor-pointer hover:bg-gray-100">
                        <p class="text-gray-600">เพิ่มรูปภาพ</p>
                    </label>
                    <div id="imagePreview" class="flex flex-wrap gap-2 mt-4"></div>
                </div>
                 <!-- ราคา -->
                <div>
                    <p class="text-gray-600 text-xl font-medium">ราคา</p>
                    <input type="number" name="price" placeholder="โปรดใส่ราคา"
                        class="w-full p-2.5 bg-stone-50 rounded-lg border border-slate-400 text-gray-600" />
                </div>
                <div class="flex gap-2">
                    <button type="button" id="section-2-before-btn" class="p-2.5 text-blue-700 rounded-md outline outline-1 outline-blue-700 w-[100px] text-center -mr-px hover:bg-blue-100">
                        ก่อนหน้า
                    </button>
                    <button type="button" id="section-2-next-btn" class="p-2.5 bg-blue-700 text-white rounded-md w-[100px] text-center hover:bg-blue-800">
                        ต่อไป
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ขั้นตอนที่ 3 -->
    <div class="flex items-start space-x-4 relative">
        <div class="flex flex-col items-center">
            <div class="w-5 h-5 bg-blue-700 rounded-full"></div>
        </div>
        <div class="flex-1 space-y-4">
            <div>
                <p class="text-gray-600 text-base">ขั้นตอนที่ 3</p>
                <p class="text-blue-700 text-xl font-bold">ข้อมูลเพิ่มเติม</p>
            </div>
            <div id="section-3" class="flex-1 space-y-4 h-auto">
                <!-- การตกแต่ง -->
                <div class="flex flex-wrap gap-4">
                    <p class="text-gray-600 text-xl font-medium">การตกแต่ง</p>
                    <div class="flex flex-wrap gap-4">
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="decoration" value="1" class="form-checkbox text-blue-700" />
                            พร้อมเข้าอยู่
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="decoration" value="2" class="form-checkbox text-blue-700" />
                            ตกแต่งบางส่วน
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="decoration" value="3" class="form-checkbox text-blue-700" />
                            เฟอร์นิเจอร์บิวท์อิน
                        </label>
                        <div class="self-stretch pl-4 pt-2 inline-flex flex-col justify-start items-start">
                            <div class="self-stretch justify-start text-gray-600 text-base font-bold">วัสดุปูพื้น</div>
                            <div class="self-stretch inline-flex justify-start items-start gap-4 flex-wrap content-start">
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="flooring" value="1" class="form-checkbox text-blue-700" />
                                    กระเบื้อง
                                </label>
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="flooring" value="2" class="form-checkbox text-blue-700" />
                                    ลามิเนต
                                </label>
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="flooring" value="3" class="form-checkbox text-blue-700" />
                                    พื้นไม้จริง
                                </label>
                            </div>
                        </div>
                        <div class="self-stretch w-full pl-4 pt-2 inline-flex flex-col justify-start items-start">
                            <div class="self-stretch justify-start text-gray-600 text-base font-bold">เพดาน</div>
                            <div class="self-stretch inline-flex justify-start items-start gap-4 flex-wrap content-start">
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="ceiling_type" value="1" class="form-checkbox text-blue-700" />
                                    ฝ้าหลุมพร้อมไฟซ่อน
                                </label>
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="ceiling_type" value="2" class="form-checkbox text-blue-700" />
                                    ฝ้าธรรมดา
                                </label>
                            </div>
                        </div>
                        <div class="self-stretch pl-4 pt-2 inline-flex flex-col justify-start items-start">
                            <div class="self-stretch justify-start text-gray-600 text-base font-bold">ผนัง</div>
                            <div class="self-stretch inline-flex justify-start items-start gap-4 flex-wrap content-start">
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="wall_type" value="1" class="form-checkbox text-blue-700" />
                                    ทาสีใหม่
                                </label>
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="wall_type" value="2" class="form-checkbox text-blue-700" />
                                    ผนังวอลเปเปอร์
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- สิ่งอำนวยความสะดวกในบ้าน -->
                <div class="flex flex-wrap gap-4">
                    <p class="text-gray-600 text-xl font-medium">สิ่งอำนวยความสะดวกในบ้าน</p>
                    <div class="flex flex-wrap gap-4">
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="home_features" value="1" class="form-checkbox text-blue-700" />
                            สระว่ายน้ำส่วนตัว
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="home_features" value="2" class="form-checkbox text-blue-700" />
                            ห้องแม่บ้าน
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="home_features" value="3" class="form-checkbox text-blue-700" />
                            ห้องทำงาน
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="home_features" value="4" class="form-checkbox text-blue-700" />
                            ห้องเก็บของ
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="home_features" value="5" class="form-checkbox text-blue-700" />
                            ห้องซักรีด
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="home_features" value="6" class="form-checkbox text-blue-700" />
                            ห้องนั่งเล่นขนาดใหญ่
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="home_features" value="9" class="form-checkbox text-blue-700" />
                            ห้องโฮมเธียเตอร์
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="home_features" value="10" class="form-checkbox text-blue-700" />
                            โรงจอดรถในบ้าน
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="home_features" value="11" class="form-checkbox text-blue-700" />
                            ระบบ Smart Home
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="home_features" value="12" class="form-checkbox text-blue-700" />
                            ระบบประตูล็อคดิจิทัล
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="home_features" value="13" class="form-checkbox text-blue-700" />
                            ระบบ CCTV
                        </label>
                        <div class="self-stretch pl-4 pt-2 inline-flex flex-col justify-start items-start">
                            <div class="self-stretch justify-start text-gray-600 text-base font-bold">ห้องครัว</div>
                            <div class="self-stretch inline-flex justify-start items-start gap-4 flex-wrap content-start">
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="home_features" value="7" class="form-checkbox text-blue-700" />
                                    ครัวไทย
                                </label>
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="home_features" value="8" class="form-checkbox text-blue-700" />
                                    ครัวฝรั่ง
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- สิ่งอำนวยความสะดวกในโครงการ (ถ้ามี) -->
                <div class="flex flex-wrap gap-4">
                    <p class="text-gray-600 text-xl font-medium">สิ่งอำนวยความสะดวกในโครงการ (ถ้ามี)</p>
                    <div class="flex flex-wrap gap-4">
                        <div class="self-stretch pl-4 pt-2 inline-flex flex-col justify-start items-start">
                            <div class="self-stretch justify-start text-gray-600 text-base font-bold">ความปลอดภัย</div>
                            <div class="self-stretch inline-flex justify-start items-start gap-4 flex-wrap content-start">
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="security" value="1" class="form-checkbox text-blue-700" />
                                    ระบบรปภ. 24 ชั่วโมง
                                </label>
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="security" value="2" class="form-checkbox text-blue-700" />
                                    ระบบคีย์การ์ด
                                </label>
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="security" value="3" class="form-checkbox text-blue-700" />
                                    ระบบ CCTV
                                </label>
                            </div>
                        </div>
                        <div class="self-stretch pl-4 pt-2 inline-flex flex-col justify-start items-start">
                            <div class="self-stretch justify-start text-gray-600 text-base font-bold">พื้นที่ส่วนกลาง</div>
                            <div class="self-stretch inline-flex justify-start items-start gap-4 flex-wrap content-start">
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="common_area" value="1" class="form-checkbox text-blue-700" />
                                    สระว่ายน้ำส่วนกลาง
                                </label>
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="common_area" value="2" class="form-checkbox text-blue-700" />
                                    ฟิตเนส
                                </label>
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="common_area" value="3" class="form-checkbox text-blue-700" />
                                    สวนส่วนกลาง
                                </label>
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="common_area" value="4" class="form-checkbox text-blue-700" />
                                    สนามเด็กเล่น
                                </label>
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="common_area" value="5" class="form-checkbox text-blue-700" />
                                    คลับเฮ้าส์
                                </label>
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="common_area" value="6" class="form-checkbox text-blue-700" />
                                    ห้องประชุม
                                </label>
                            </div>
                        </div>
                        <div class="self-stretch pl-4 pt-2 inline-flex flex-col justify-start items-start">
                            <div class="self-stretch justify-start text-gray-600 text-base font-bold">การเดินทาง</div>
                            <div class="self-stretch inline-flex justify-start items-start gap-4 flex-wrap content-start">
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="travelling" value="1" class="form-checkbox text-blue-700" />
                                    บริการรถรับส่ง
                                </label>
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="travelling" value="2" class="form-checkbox text-blue-700" />
                                    ที่จอดรถในโครงการ
                                </label>
                            </div>
                        </div>
                        <div class="self-stretch pl-4 pt-2 inline-flex flex-col justify-start items-start">
                            <div class="self-stretch justify-start text-gray-600 text-base font-bold">อื่น ๆ</div>
                            <div class="self-stretch inline-flex justify-start items-start gap-4 flex-wrap content-start">
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="facilities" value="1" class="form-checkbox text-blue-700" />
                                    ร้านค้า/ร้านอาหารในโครงการ
                                </label>
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="facilities" value="2" class="form-checkbox text-blue-700" />
                                    พื้นที่สำหรับปาร์ตี้หรือกิจกรรม
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ระบบภายในบ้าน -->
                <div class="flex flex-wrap gap-4">
                    <p class="text-gray-600 text-xl font-medium">ระบบภายในบ้าน</p>
                    <div class="flex flex-wrap gap-4">
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="home_systems" value="1" class="form-checkbox text-blue-700" />
                            ระบบไฟฟ้า
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="home_systems" value="2" class="form-checkbox text-blue-700" />
                            ระบบปรับอากาศ
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="home_systems" value="5" class="form-checkbox text-blue-700" />
                            ระบบน้ำร้อนน้ำเย็น
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="home_systems" value="6" class="form-checkbox text-blue-700" />
                            ระบบกันไฟรั่ว
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="home_systems" value="7" class="form-checkbox text-blue-700" />
                            ระบบไฟสำรอง
                        </label>
                        <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="home_systems" value="8" class="form-checkbox text-blue-700" />
                            ระบบระบายน้ำ
                        </label>
                    </div>
                </div>

                <!-- รายละเอียดอื่น ๆ -->
                <div class="flex flex-wrap gap-4">
                    <p class="text-gray-600 text-xl font-medium">รายละเอียดอื่น ๆ</p>
                    <div class="flex flex-wrap gap-4">
                        <div class="self-stretch pl-4 pt-2 inline-flex flex-col justify-start items-start">
                            <div class="self-stretch justify-start text-gray-600 text-base font-bold">สภาพบ้าน</div>
                            <div class="self-stretch inline-flex justify-start items-start gap-4 flex-wrap content-start">
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="conditions" value="1" class="form-checkbox text-blue-700" />
                                    บ้านใหม่
                                </label>
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="conditions" value="2" class="form-checkbox text-blue-700" />
                                    บ้านรีโนเวท
                                </label>
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="conditions" value="3" class="form-checkbox text-blue-700" />
                                    บ้านพร้อมตกแต่งสวน
                                </label>
                            </div>
                        </div>
                        <div class="self-stretch pl-4 pt-2 inline-flex flex-col justify-start items-start">
                            <div class="self-stretch justify-start text-gray-600 text-base font-bold">วิวบ้าน</div>
                            <div class="self-stretch inline-flex justify-start items-start gap-4 flex-wrap content-start">
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="views" value="2" class="form-checkbox text-blue-700" />
                                    วิวธรรมชาติ
                                </label>
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="views" value="3" class="form-checkbox text-blue-700" />
                                    วิวเมือง
                                </label>
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="views" value="4" class="form-checkbox text-blue-700" />
                                    วิวทะเล
                                </label>
                            </div>
                        </div>
                        <div class="self-stretch pl-4 pt-2 inline-flex flex-col justify-start items-start">
                            <div class="self-stretch justify-start text-gray-600 text-base font-bold">การรับประกัน</div>
                            <div class="self-stretch inline-flex justify-start items-start gap-4 flex-wrap content-start">
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="warranties" value="1" class="form-checkbox text-blue-700" />
                                    บ้านมีประกันโครงสร้าง
                                </label>
                                <label class="min-w-[150px] flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" name="warranties" value="3" class="form-checkbox text-blue-700" />
                                    บ้านมีประกันเครื่องใช้ไฟฟ้า
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex gap-2">
                    <button type="button" id="section-3-before-btn" class="p-2.5 text-blue-700 rounded-md outline outline-1 outline-blue-700 w-[100px] text-center -mr-px hover:bg-blue-100">
                        ก่อนหน้า
                    </button>
                    <button type="submit" id="section-3-submit-btn" class="p-2.5 bg-blue-700 text-white rounded-md w-[100px] text-center hover:bg-blue-800">
                        ส่งข้อมูล
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>


</div>

</form>

<script>
let coverImage = null;
let coverButton = null;

function previewImages() {
    let preview = document.getElementById('imagePreview');
    let files = document.getElementById('imageUpload').files;

    let isFirstBatch = coverImage === null;

    Array.from(files).forEach((file, index) => {
        let container = document.createElement('div');
        container.className = 'relative flex flex-col items-center';

        let img = document.createElement('img');
        img.src = URL.createObjectURL(file);
        img.className = 'w-20 h-20 object-cover rounded-lg border border-gray-300';

        let removeBtn = document.createElement('button');
        removeBtn.type = "button";
        removeBtn.innerHTML = '&times;';
        removeBtn.className = 'absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md text-sm';
        removeBtn.onclick = () => {
            container.remove();
            if (coverImage === img) {
                coverImage = null;
                coverButton = null;
                setNewCover();
            }
        };

        let coverBtn = document.createElement('button');
        coverBtn.type = "button";
        coverBtn.innerText = 'ใช้เป็นหน้าปก';
        coverBtn.className = 'mt-1 px-2 py-1 bg-blue-500 text-white text-xs rounded block';
        coverBtn.onclick = () => setCoverImage(container, img, coverBtn, removeBtn);

        let btnContainer = document.createElement('div');
        btnContainer.className = 'mt-1 flex flex-col items-center';
        btnContainer.appendChild(coverBtn);

        container.appendChild(img);
        container.appendChild(removeBtn);
        container.appendChild(btnContainer);
        preview.appendChild(container);

        if (isFirstBatch && index === 0) {
            setCoverImage(container, img, coverBtn, removeBtn);
        }
    });
}

function setCoverImage(container, img, button, removeBtn) {
    if (coverImage) {
        coverImage.style.border = 'none';
        coverButton.style.display = 'block';
        coverImage.parentElement.querySelector('.absolute').style.display = 'block';
    }

    coverImage = img;
    coverButton = button;
    coverImage.style.border = '2px solid blue';
    coverButton.style.display = 'none';
    removeBtn.style.display = 'none';

    let preview = document.getElementById('imagePreview');
    preview.prepend(container);
}

function setNewCover() {
    let preview = document.getElementById('imagePreview');
    let firstImageContainer = preview.querySelector('div');

    if (firstImageContainer) {
        let img = firstImageContainer.querySelector('img');
        let button = firstImageContainer.querySelector('button:nth-child(1)');
        let removeBtn = firstImageContainer.querySelector('.absolute');
        setCoverImage(firstImageContainer, img, button, removeBtn);
    }
}

document.addEventListener("DOMContentLoaded", function () {
    let sections = ["section-1", "section-2", "section-3"];
    let currentIndex = 0;

    function showSection(index) {
        sections.forEach((id, i) => {
            document.getElementById(id).style.display = i === index ? "block" : "none";
        });

        document.getElementById("section-1-next-btn").style.display = index === 0 ? "block" : "none";
        document.getElementById("section-2-before-btn").style.display = index === 1 ? "block" : "none";
        document.getElementById("section-2-next-btn").style.display = index === 1 ? "block" : "none";
        document.getElementById("section-3-before-btn").style.display = index === 2 ? "block" : "none";
        document.getElementById("section-3-submit-btn").style.display = index === 2 ? "block" : "none";
    }

    document.getElementById("section-1-next-btn").type = "button";
    document.getElementById("section-2-before-btn").type = "button";
    document.getElementById("section-2-next-btn").type = "button";
    document.getElementById("section-3-before-btn").type = "button";

    document.getElementById("section-1-next-btn").addEventListener("click", function () {
        currentIndex = 1;
        showSection(currentIndex);
    });

    document.getElementById("section-2-before-btn").addEventListener("click", function () {
        currentIndex = 0;
        showSection(currentIndex);
    });

    document.getElementById("section-2-next-btn").addEventListener("click", function () {
        currentIndex = 2;
        showSection(currentIndex);
    });

    document.getElementById("section-3-before-btn").addEventListener("click", function () {
        currentIndex = 1;
        showSection(currentIndex);
    });

    showSection(currentIndex);
});


</script>

{% endblock %}
